<div class="project-creator">
  <h2>{{ creating ? 'Creating Project...' : 'Create New Project' }}</h2>

  <!-- Project Form -->
  <form [formGroup]="projectForm" (ngSubmit)="create()" *ngIf="!creating">
    <mat-form-field appearance="fill">
      <mat-label>Project Name</mat-label>
      <input matInput formControlName="name" placeholder="my-project">
      <mat-error *ngIf="projectForm.get('name')?.errors?.['pattern']">
        Project name can only contain lowercase letters, numbers, and hyphens
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Description</mat-label>
      <textarea matInput formControlName="description" placeholder="Project description"></textarea>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Template</mat-label>
      <mat-select formControlName="template">
        <mat-option value="angular">Angular</mat-option>
        <mat-option value="react">React</mat-option>
      </mat-select>
    </mat-form-field>

    <div class="actions">
      <button mat-button type="button" (click)="cancel()">Cancel</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!projectForm.valid">
        Create
      </button>
    </div>
  </form>

  <!-- Creation Progress -->
  <div class="creation-progress" *ngIf="creating">
    <div class="log-container">
      <div class="log-entry" *ngFor="let log of logs" [class]="log.type">
        <span class="timestamp">{{ log.timestamp | date:'HH:mm:ss' }}</span>
        <span class="log-data">{{ log.data }}</span>
      </div>
      <div #logBottom></div>
    </div>

    <mat-progress-bar mode="indeterminate"></mat-progress-bar>

    <div class="actions">
      <button mat-button color="warn" (click)="cancel()" [disabled]="!canCancel">
        Cancel
      </button>
    </div>
  </div>
</div>
